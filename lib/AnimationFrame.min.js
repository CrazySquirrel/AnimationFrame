!function(t,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define("AnimationFrame",[],a):"object"==typeof exports?exports.AnimationFrame=a():t.AnimationFrame=a()}(this,function(){return function(t){function a(n){if(e[n])return e[n].exports;var r=e[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}var e={};return a.m=t,a.c=e,a.p="",a(0)}({0:function(t,a,e){t.exports=e(5)},5:function(t,a){(function(e){"use strict";function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function r(t){function a(){}function e(){return i.apply(this instanceof a?this:t||s,r.concat(n.call(arguments)))}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=Array.prototype.slice,r=n.call(arguments,1),i=this;return a.prototype=this.prototype,e.prototype=new a,e}function i(){var t=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=a.length;return function(n){if("object"!==("undefined"==typeof n?"undefined":c(n))&&("function"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var r=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(i);if(t)for(var o=0;o<e;o++)Object.prototype.hasOwnProperty.call(n,a[o])&&r.push(a[o]);return r}}function o(t,a){if("string"==typeof t&&"string"==typeof a){t=t.trim().split("."),a=a.trim().split(".");for(var e=0;e<t.length;e++){if(t[e]=t[e]||0,a[e]=a[e]||0,t[e]>a[e])return!1;if(t[e]<a[e])return!0}}return!1}a.__esModule=!0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l="1.0.22",s=void 0;s="undefined"==typeof window?"undefined"!=typeof e?e:{}:window,s.requestAnimationFrame=function(){return"undefined"!=typeof s&&(s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame)||function(t){s.setTimeout(t,1e3/60)}}(),Function.prototype.bind=Function.prototype.bind||r,Object.keys=Object.keys||i();var p=function(){function t(){n(this,t),this.version=l,this.serialID=0,this.parallelStack={},this.serialStack={},this.stack=this.parallelStack,this.watch()}return t.prototype.subscribe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments[3];return this.parallelSubscribe({context:t,callback:a,params:e,ID:n})},t.prototype.parallelSubscribe=function(t){return t=this.prepareParams(t),!!t&&(this.parallelStack[t.ID]={callback:t.callback,context:t.context,params:t.params},t.ID)},t.prototype.serialSubscribe=function(t){return t=this.prepareParams(t),!!t&&(this.serialStack[t.ID]={callback:t.callback,context:t.context,params:t.params},t.ID)},t.prototype.unsubscribe=function(t){this.parallelUnsubscribe(t)},t.prototype.parallelUnsubscribe=function(t){"string"==typeof t&&this.parallelStack[t]&&(this.parallelStack[t]=!1,delete this.parallelStack[t])},t.prototype.serialUnsubscribe=function(t){"string"==typeof t&&this.serialStack[t]&&(this.serialStack[t]=!1,delete this.serialStack[t])},t.prototype.prepareParams=function(t){if("object"===("undefined"==typeof t?"undefined":c(t))){var a=new Date;return t.context=t.context||s,t.callback=t.callback||function(){return null},t.params=t.params||[],t.ID=t.ID||"x-"+a.getTime()+"-"+Math.round(1e6*Math.random()),!("object"!==c(t.context)||"function"!=typeof t.callback||"object"!==c(t.params)||!Array.isArray(t.params)||"string"!=typeof t.ID)&&t}return!1},t.prototype.watch=function(){try{this.parallelWatch()}catch(t){}try{this.serialWatch()}catch(t){}s.requestAnimationFrame(this.watch.bind(this))},t.prototype.parallelWatch=function(){try{if(this.parallelStack&&"object"===c(this.parallelStack)&&Object.keys(this.parallelStack).length>0)for(var t in this.parallelStack)if(this.parallelStack.hasOwnProperty(t))try{if(t&&"string"==typeof t){var a=this.parallelStack[t];a&&"object"===("undefined"==typeof a?"undefined":c(a))&&a.context&&a.callback&&a.params&&"object"===c(a.context)&&"function"==typeof a.callback&&Array.isArray(a.params)&&a.callback.apply(a.context,a.params)}}catch(t){}}catch(t){}},t.prototype.serialWatch=function(){try{if(this.serialStack&&"object"===c(this.serialStack)){var t=Object.keys(this.serialStack);if(t&&t.length>0){this.serialID>=t.length&&(this.serialID=0);var a=t[this.serialID];if(this.serialID++,this.serialStack.hasOwnProperty(a)&&a&&"string"==typeof a){var e=this.serialStack[a];e&&"object"===("undefined"==typeof e?"undefined":c(e))&&e.context&&e.callback&&e.params&&"object"===c(e.context)&&"function"==typeof e.callback&&Array.isArray(e.params)&&e.callback.apply(e.context,e.params)}}}}catch(t){}},t}();s.AnimationFrame&&s.AnimationFrame.version&&!o(s.AnimationFrame.version,l)||Object.defineProperty(s,"AnimationFrame",{configurable:!0,enumerable:!1,get:function(){return s._AnimationFrame||(s.AnimationFrame=new p),s._AnimationFrame},set:function(){if(s._AnimationFrame){if(!s._AnimationFrame.version||o(s._AnimationFrame.version,l)){var t=new p;if("object"===c(s._AnimationFrame.parallelStack))for(var a in s._AnimationFrame.parallelStack)s._AnimationFrame.parallelStack.hasOwnProperty(a)&&(t.parallelSubscribe({callback:s._AnimationFrame.parallelStack[a].callback,context:s._AnimationFrame.parallelStack[a].context,params:s._AnimationFrame.parallelStack[a].params,ID:a}),s._AnimationFrame.parallelUnsubscribe(a));else if("object"===c(s._AnimationFrame.stack))for(var e in s._AnimationFrame.stack)s._AnimationFrame.stack.hasOwnProperty(e)&&(t.subscribe(s._AnimationFrame.stack[e].context,s._AnimationFrame.stack[e].callback,s._AnimationFrame.stack[e].params,s._AnimationFrame.stack[e].ID),s._AnimationFrame.unsubscribe(e));if("object"===c(s._AnimationFrame.serialStack))for(var n in s._AnimationFrame.serialStack)s._AnimationFrame.serialStack.hasOwnProperty(n)&&(t.serialSubscribe({callback:s._AnimationFrame.serialStack[n].callback,context:s._AnimationFrame.serialStack[n].context,params:s._AnimationFrame.serialStack[n].params,ID:n}),s._AnimationFrame.serialUnsubscribe(n));s._AnimationFrame=t}}else s._AnimationFrame=new p}}),s.AnimationFrame=new p;var m=s.AnimationFrame;a.default=m,t.exports=m}).call(a,function(){return this}())}})});